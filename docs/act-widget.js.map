{
  "version": 3,
  "sources": ["../src/index.js", "../src/agent/selectors.js", "../src/agent/safety.js", "../src/agent/core.js", "../src/tasks/workday-take-day-off.js", "../src/llm/adapter.js", "../src/ui/widget.js"],
  "sourcesContent": ["// Entry point for Pendo Act POC (JavaScript)\n// Exposes a global PendoAct object when bundled as an IIFE via esbuild.\n\nimport { createWidget } from './ui/widget.js';\nimport { runPlan } from './agent/core.js';\nimport { workdayTakeDayOffNextMonday } from './tasks/workday-take-day-off.js';\n\nfunction getBaseUrl() {\n  // Try to infer from the currently executing script\n  const script = document.currentScript || Array.from(document.getElementsByTagName('script')).find(s => s.src && s.src.includes('act-widget'));\n  try {\n    return script ? new URL('.', script.src).toString() : '';\n  } catch {\n    return '';\n  }\n}\n\nfunction ensureStylesheet(href) {\n  if (!href) return;\n  const existing = Array.from(document.styleSheets).find(ss => ss.href === href);\n  if (existing) return;\n  const link = document.createElement('link');\n  link.rel = 'stylesheet';\n  link.href = href;\n  document.head.appendChild(link);\n}\n\nexport function boot(options = {}) {\n  const baseUrl = options.baseUrl || getBaseUrl();\n  ensureStylesheet(`${baseUrl}act-widget.css`);\n\n  const allowlist = options.allowlist || [new RegExp('^' + escapeRegExp(location.origin))];\n  const plans = {\n    workdayTakeDayOffNextMonday,\n    ...(options.plans || {})\n  };\n\n  const api = createWidget({\n    runPlan,\n    plans,\n    allowlist,\n  });\n\n  return api;\n}\n\nexport const version = '0.1.0';\nexport const plans = { workdayTakeDayOffNextMonday };\n\n// Utility\nfunction escapeRegExp(str) {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n}\n\n", "// Target resolution helpers. Favor stable anchors first.\n\nexport async function findTarget(target, { timeoutMs = 8000 } = {}) {\n  const deadline = Date.now() + timeoutMs;\n  let lastError;\n  while (Date.now() < deadline) {\n    try {\n      const scope = target?.within ? await findTarget(target.within, { timeoutMs: 1000 }) : document;\n      const el = resolveOnce(scope, target);\n      if (el) return el;\n    } catch (e) {\n      lastError = e;\n    }\n    await sleep(150);\n  }\n  throw lastError || new Error(`Target not found: ${JSON.stringify(target)}`);\n}\n\nfunction resolveOnce(scope, t = {}) {\n  const candidates = [];\n  if (t.testId) candidates.push(...scope.querySelectorAll(`[data-testid=\"${cssEscape(t.testId)}\"]`));\n  if (t.selector) candidates.push(...scope.querySelectorAll(t.selector));\n  if (t.placeholder) candidates.push(...Array.from(scope.querySelectorAll('input,textarea')).filter(e => e.placeholder?.trim() === t.placeholder));\n  if (t.role || t.name) candidates.push(...byAria(scope, t.role, t.name));\n  if (t.text) candidates.push(...byText(scope, t.text));\n\n  const el = pickBest(candidates, t);\n  return el || null;\n}\n\nfunction byAria(scope, role, name) {\n  let els = role ? Array.from(scope.querySelectorAll(`[role=\"${cssEscape(role)}\"]`)) : Array.from(scope.querySelectorAll('button,a,input,textarea,select,[role]'));\n  if (name) {\n    const needle = norm(name);\n    els = els.filter(e => norm(accessibleName(e)).includes(needle));\n  }\n  return els;\n}\n\nfunction byText(scope, text) {\n  const needle = norm(text);\n  const clickables = scope.querySelectorAll('button,a,[role=\"button\"],[role=\"menuitem\"],[role=\"option\"],label,div,span');\n  return Array.from(clickables).filter(e => norm(e.innerText).includes(needle));\n}\n\nfunction pickBest(candidates, t) {\n  if (!candidates.length) return null;\n  const scored = candidates.map(el => ({ el, score: score(el, t) }));\n  scored.sort((a,b) => b.score - a.score);\n  return scored[0].el;\n}\n\nfunction score(el, t) {\n  let s = 0;\n  if (t.testId && el.matches(`[data-testid=\"${cssEscape(t.testId)}\"]`)) s += 10;\n  if (t.selector && el.matches(t.selector)) s += 5;\n  if (t.role && el.getAttribute('role') === t.role) s += 3;\n  if (t.name && norm(accessibleName(el)).includes(norm(t.name))) s += 3;\n  if (t.text && norm(el.innerText).includes(norm(t.text))) s += 2;\n  if (t.placeholder && (el.placeholder?.trim() === t.placeholder)) s += 1;\n  // prefer visible and in-viewport\n  if (isVisible(el)) s += 2;\n  if (inViewport(el)) s += 1;\n  return s;\n}\n\nfunction accessibleName(el) {\n  return el.getAttribute('aria-label') || el.getAttribute('aria-labelledby') || el.getAttribute('title') || el.innerText || '';\n}\n\nfunction isVisible(el) {\n  const style = getComputedStyle(el);\n  return style && style.visibility !== 'hidden' && style.display !== 'none' && el.offsetParent !== null;\n}\n\nfunction inViewport(el) {\n  const r = el.getBoundingClientRect();\n  return r.bottom > 0 && r.top < window.innerHeight && r.right > 0 && r.left < window.innerWidth;\n}\n\nfunction norm(s) { return (s || '').trim().toLowerCase(); }\nfunction cssEscape(s) { return String(s).replace(/\"/g, '\\\\\"'); }\nfunction sleep(ms) { return new Promise(r => setTimeout(r, ms)); }\n\n", "// Safety: allowlist enforcement and confirmation heuristics.\n\nexport function isAllowedUrl(url, allowlist) {\n  try {\n    const u = new URL(url);\n    const full = u.toString();\n    return allowlist.some(rx => rx.test(full));\n  } catch {\n    return false;\n  }\n}\n\nexport function requiresConfirmation(el) {\n  const tag = el.tagName.toLowerCase();\n  const txt = (el.getAttribute('aria-label') || el.innerText || '').toLowerCase();\n  const riskyWords = ['delete', 'remove', 'submit', 'pay', 'confirm', 'approve', 'purchase', 'transfer', 'save'];\n  if (tag === 'button' || el.getAttribute('role') === 'button') {\n    return riskyWords.some(w => txt.includes(w));\n  }\n  return false;\n}\n\n", "// Core agent: executes a JSON plan using DOM-based primitives.\n// Keeps everything client-side. No inline CSS used anywhere.\n\nimport { findTarget } from './selectors.js';\nimport { isAllowedUrl, requiresConfirmation } from './safety.js';\n\nexport async function runPlan(plan, opts) {\n  const { allowlist = [/.*/], onEvent = () => {}, confirm = defaultConfirm, signal } = opts || {};\n  const ctx = { allowlist, onEvent, confirm, aborted: false };\n\n  const abortHandler = () => { ctx.aborted = true; };\n  if (signal) {\n    if (signal.aborted) throw new Error('aborted');\n    signal.addEventListener('abort', abortHandler, { once: true });\n  }\n\n  onEvent({ type: 'plan:start', task: plan.task, steps: plan.steps?.length || 0 });\n  try {\n    for (let i = 0; i < (plan.steps?.length || 0); i++) {\n      if (ctx.aborted) throw new Error('aborted');\n      const step = plan.steps[i];\n      onEvent({ type: 'step:start', i, step });\n      try {\n        await execStep(step, ctx);\n        onEvent({ type: 'step:success', i });\n      } catch (err) {\n        onEvent({ type: 'step:fail', i, error: String(err) });\n        throw err;\n      }\n    }\n    onEvent({ type: 'plan:success' });\n  } finally {\n    if (signal) signal.removeEventListener('abort', abortHandler);\n  }\n}\n\nasync function execStep(step, ctx) {\n  switch (step.action) {\n    case 'navigate':\n      return navigate(step.url, ctx);\n    case 'waitFor':\n      return waitFor(step, ctx);\n    case 'click':\n      return click(step, ctx);\n    case 'type':\n      return type(step, ctx);\n    case 'select':\n      return select(step, ctx);\n    case 'scroll':\n      return scroll(step, ctx);\n    case 'extract':\n      return extract(step, ctx);\n    default:\n      throw new Error(`Unknown action: ${step.action}`);\n  }\n}\n\nasync function navigate(url, ctx) {\n  const full = new URL(url, location.href).toString();\n  if (!isAllowedUrl(full, ctx.allowlist)) throw new Error(`Blocked by allowlist: ${full}`);\n  location.assign(full);\n  await waitFor({ action: 'waitFor', urlIncludes: new URL(full).pathname }, ctx);\n}\n\nasync function waitFor(step, ctx) {\n  const timeout = step.timeoutMs ?? 15000;\n  const start = Date.now();\n  while (Date.now() - start < timeout) {\n    if (ctx.aborted) throw new Error('aborted');\n    const byUrl = step.urlIncludes ? location.href.includes(step.urlIncludes) : true;\n    const byText = step.text ? document.body.innerText.includes(step.text) : true;\n    const bySel = step.selector ? document.querySelector(step.selector) : true;\n    if (byUrl && byText && bySel) return;\n    await sleep(200);\n  }\n  throw new Error('waitFor timeout');\n}\n\nasync function click(step, ctx) {\n  const el = await findTarget(step.target, { timeoutMs: step.timeoutMs ?? 10000 });\n  if (requiresConfirmation(el)) {\n    const ok = await ctx.confirm({ message: `Confirm clicking: ${labelFor(el)}` });\n    if (!ok) throw new Error('user_cancelled');\n  }\n  el.click();\n}\n\nasync function type(step, ctx) {\n  const el = await findTarget(step.target, { timeoutMs: step.timeoutMs ?? 10000 });\n  if (!(el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement || el.isContentEditable)) {\n    throw new Error('target_not_typable');\n  }\n  if (step.clear || (el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement)) {\n    el.value = '';\n  }\n  if (el.isContentEditable) {\n    el.textContent = step.value ?? '';\n  } else {\n    el.value = step.value ?? '';\n    el.dispatchEvent(new Event('input', { bubbles: true }));\n    el.dispatchEvent(new Event('change', { bubbles: true }));\n  }\n}\n\nasync function select(step, ctx) {\n  const el = await findTarget(step.target, { timeoutMs: step.timeoutMs ?? 10000 });\n  if (el.tagName.toLowerCase() === 'select') {\n    const sel = el;\n    const value = step.value;\n    const label = step.label;\n    let toSet = value;\n    if (label != null) {\n      const opt = Array.from(sel.options).find(o => o.text.trim() === label);\n      if (!opt) throw new Error('option_not_found');\n      toSet = opt.value;\n    }\n    if (toSet == null) throw new Error('select_requires_value_or_label');\n    sel.value = toSet;\n    sel.dispatchEvent(new Event('input', { bubbles: true }));\n    sel.dispatchEvent(new Event('change', { bubbles: true }));\n  } else {\n    // Attempt to open a combobox-like control and choose an option by text\n    el.click();\n    await waitFor({ action: 'waitFor', text: step.label ?? step.value, timeoutMs: 5000 }, ctx);\n    const opt = await findTarget({ text: step.label ?? step.value }, { timeoutMs: 3000 });\n    opt.click();\n  }\n}\n\nasync function scroll(step, ctx) {\n  if (step.target) {\n    const el = await findTarget(step.target, { timeoutMs: step.timeoutMs ?? 10000 });\n    el.scrollIntoView({ behavior: 'smooth', block: 'center' });\n  } else if (typeof step.y === 'number') {\n    window.scrollTo({ top: step.y, behavior: step.behavior || 'smooth' });\n  }\n}\n\nasync function extract(step, ctx) {\n  const el = await findTarget(step.target, { timeoutMs: step.timeoutMs ?? 10000 });\n  if (step.as === 'text') return el.innerText.trim();\n  if (step.as === 'list') return Array.from(el.querySelectorAll('li, [role=\"listitem\"]')).map(x => x.innerText.trim());\n  if (step.as === 'table') return tableToArray(el);\n  return el.innerText.trim();\n}\n\nfunction tableToArray(root) {\n  const rows = Array.from(root.querySelectorAll('tr'));\n  return rows.map(r => Array.from(r.querySelectorAll('th,td')).map(c => c.innerText.trim()));\n}\n\nfunction labelFor(el) {\n  return (el.getAttribute('aria-label') || el.innerText || el.getAttribute('name') || el.id || el.tagName).trim().slice(0, 80);\n}\n\nfunction defaultConfirm({ message }) {\n  return Promise.resolve(window.confirm(message));\n}\n\nfunction sleep(ms) { return new Promise(r => setTimeout(r, ms)); }\n\n", "// Sample plan for the Workday \"Take a day off next Monday\" flow.\n// This is intentionally high-level; selectors are resolved at runtime.\n\nexport const workdayTakeDayOffNextMonday = {\n  task: 'Take a day off next Monday',\n  steps: [\n    { action: 'waitFor', urlIncludes: '/', timeoutMs: 20000 },\n    // Open navigation menu (name contextual; adjust if needed)\n    { action: 'click', target: { role: 'button', name: 'Menu' } },\n    { action: 'click', target: { text: 'Absence' } },\n\n    { action: 'waitFor', text: 'Request Absence', timeoutMs: 15000 },\n    { action: 'click', target: { role: 'button', name: 'Request Absence' } },\n\n    { action: 'waitFor', text: 'Select date range', timeoutMs: 15000 },\n    { action: 'click', target: { role: 'button', name: 'Select date range' } },\n\n    // From and To date picks are site-specific; for POC we assume combobox fields\n    { action: 'click', target: { role: 'button', name: 'From' } },\n    { action: 'click', target: { text: nextMondayLabel() } },\n\n    { action: 'click', target: { role: 'button', name: 'To' } },\n    { action: 'click', target: { text: nextMondayLabel() } },\n\n    { action: 'waitFor', text: 'Type', timeoutMs: 10000 },\n    { action: 'click', target: { role: 'combobox', name: 'Type' } },\n    { action: 'click', target: { text: 'Flexible Time Off' } },\n\n    { action: 'waitFor', text: 'Next', timeoutMs: 10000 },\n    { action: 'click', target: { role: 'button', name: 'Next' } },\n\n    // Human confirmation step for final Submit remains manual in the POC\n  ]\n};\n\nfunction nextMondayLabel() {\n  // Returns a label like \"Mon 12\" or \"12\" depending on calendar. Keep loose:\n  const d = new Date();\n  const day = d.getDay(); // 0-6 (Sun-Sat)\n  const delta = (1 - day + 7) % 7 || 7; // next Monday\n  const nm = new Date(Date.now() + delta * 24 * 60 * 60 * 1000);\n  return String(nm.getDate());\n}\n\n", "// Simple LLM adapter placeholder.\n// Later, swap this with a real/local model. For now, do lightweight heuristics.\n\nimport { workdayTakeDayOffNextMonday } from '../tasks/workday-take-day-off.js';\n\nexport async function planFromText(text, context = {}) {\n  const t = (text || '').toLowerCase();\n\n  // Heuristic routing\n  if (/(day\\s*off|absence|vacation).*(next\\s*monday)/.test(t)) {\n    return workdayTakeDayOffNextMonday;\n  }\n\n  // Check for a locally recorded plan (fast iteration)\n  const saved = loadRecordedPlan();\n  if (saved && /(run|execute).*(record(ed)?\\s*plan|recording)/.test(t)) {\n    return saved;\n  }\n\n  // Default: no plan\n  return null;\n}\n\nexport function loadRecordedPlan() {\n  try {\n    const raw = localStorage.getItem('pact.recorder.plan');\n    if (!raw) return null;\n    const plan = JSON.parse(raw);\n    if (plan && Array.isArray(plan.steps)) return plan;\n  } catch {}\n  return null;\n}\n\n", "// UI widget: launcher + panel + simple chat/quick actions.\n// Note: styling lives in styles/act-widget.css per the no-inline-CSS rule.\n\nimport { runPlan as run } from '../agent/core.js';\nimport { workdayTakeDayOffNextMonday as samplePlan } from '../tasks/workday-take-day-off.js';\nimport { planFromText, loadRecordedPlan } from '../llm/adapter.js';\n\nexport function createWidget({ runPlan = run, plans = { samplePlan }, allowlist = [/.*/] } = {}) {\n  const state = { open: false, running: false, controller: null };\n\n  // Root container\n  const root = document.createElement('div');\n  root.className = 'pact-root';\n  root.setAttribute('data-pact', 'root');\n\n  // Launcher button\n  const launcher = document.createElement('button');\n  launcher.className = 'pact-launcher';\n  launcher.type = 'button';\n  launcher.textContent = 'Act';\n  root.appendChild(launcher);\n\n  // Panel\n  const panel = document.createElement('div');\n  panel.className = 'pact-panel pact-hidden';\n  panel.innerHTML = `\n    <div class=\"pact-header\">\n      <div class=\"pact-title\">Pendo Act (POC)</div>\n      <div class=\"pact-tools\">\n        <button class=\"pact-record\" type=\"button\" aria-pressed=\"false\">\u25CF Record</button>\n        <button class=\"pact-save\" type=\"button\">Save</button>\n        <button class=\"pact-run-recording\" type=\"button\">Run Recording</button>\n        <button class=\"pact-clear-recording\" type=\"button\">Clear</button>\n        <button class=\"pact-close\" type=\"button\" aria-label=\"Close\">\u00D7</button>\n      </div>\n    </div>\n    <div class=\"pact-body\">\n      <div class=\"pact-quick\">\n        <button class=\"pact-quick-btn\" data-action=\"workday-dayoff\">Take a day off next Monday</button>\n      </div>\n      <div class=\"pact-chat\">\n        <form class=\"pact-form\">\n          <input class=\"pact-input\" name=\"q\" placeholder=\"Describe what to do\u2026\" autocomplete=\"off\" />\n          <button class=\"pact-run\" type=\"submit\">Run</button>\n          <button class=\"pact-stop\" type=\"button\">Stop</button>\n        </form>\n      </div>\n      <div class=\"pact-log\" aria-live=\"polite\"></div>\n    </div>\n  `;\n  root.appendChild(panel);\n\n  document.body.appendChild(root);\n\n  const closeBtn = panel.querySelector('.pact-close');\n  const log = panel.querySelector('.pact-log');\n  const form = panel.querySelector('.pact-form');\n  const input = panel.querySelector('.pact-input');\n  const runBtn = panel.querySelector('.pact-run');\n  const stopBtn = panel.querySelector('.pact-stop');\n\n  // Recorder controls\n  const recordBtn = panel.querySelector('.pact-record');\n  const saveBtn = panel.querySelector('.pact-save');\n  const runRecordingBtn = panel.querySelector('.pact-run-recording');\n  const clearRecordingBtn = panel.querySelector('.pact-clear-recording');\n\n  function open() {\n    state.open = true;\n    panel.classList.remove('pact-hidden');\n  }\n  function close() {\n    state.open = false;\n    panel.classList.add('pact-hidden');\n  }\n  function toggle() { state.open ? close() : open(); }\n\n  launcher.addEventListener('click', toggle);\n  closeBtn.addEventListener('click', close);\n\n  panel.querySelector('.pact-quick-btn').addEventListener('click', async () => {\n    await runTask(samplePlan);\n  });\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const text = input.value.trim();\n    if (!text) return;\n\n    const plan = await planFromText(text, { plans: { samplePlan } });\n    if (plan) {\n      await runTask(plan);\n    } else {\n      appendLog('Planner', 'No matching plan. Try: \"Take a day off next Monday\" or \"Run recorded plan\"');\n    }\n  });\n\n  stopBtn.addEventListener('click', () => {\n    if (state.controller) state.controller.abort();\n  });\n\n  // Recorder implementation\n  const recorder = { enabled: false, steps: [], handlers: [] };\n\n  recordBtn.addEventListener('click', () => {\n    recorder.enabled ? stopRecorder() : startRecorder();\n  });\n  saveBtn.addEventListener('click', () => saveRecording());\n  runRecordingBtn.addEventListener('click', async () => {\n    const plan = loadRecordedPlan();\n    if (!plan) return appendLog('Recorder', 'No recording found in localStorage');\n    await runTask(plan);\n  });\n  clearRecordingBtn.addEventListener('click', () => {\n    localStorage.removeItem('pact.recorder.plan');\n    appendLog('Recorder', 'Cleared saved recording');\n  });\n\n  function startRecorder() {\n    recorder.enabled = true;\n    recordBtn.setAttribute('aria-pressed', 'true');\n    recordBtn.classList.add('pact-recording');\n    appendLog('Recorder', 'Recording started');\n\n    const onClick = (e) => {\n      if (!recorder.enabled) return;\n      const el = e.target;\n      if (el.closest('.pact-root')) return; // ignore widget\n      const target = toTarget(el);\n      recorder.steps.push({ action: 'click', target });\n      highlight(el);\n    };\n    const onChange = (e) => {\n      if (!recorder.enabled) return;\n      const el = e.target;\n      if (el.closest('.pact-root')) return;\n      if (!(el instanceof HTMLInputElement || el instanceof HTMLTextAreaElement || el.isContentEditable)) return;\n      const target = toTarget(el);\n      const value = el.isContentEditable ? (el.textContent || '') : (el.value || '');\n      recorder.steps.push({ action: 'type', target, value });\n      highlight(el);\n    };\n\n    document.addEventListener('click', onClick, true);\n    document.addEventListener('change', onChange, true);\n    recorder.handlers = [ ['click', onClick], ['change', onChange] ];\n  }\n\n  function stopRecorder() {\n    recorder.enabled = false;\n    recordBtn.setAttribute('aria-pressed', 'false');\n    recordBtn.classList.remove('pact-recording');\n    for (const [type, fn] of recorder.handlers) document.removeEventListener(type, fn, true);\n    recorder.handlers = [];\n    appendLog('Recorder', `Recording stopped. Steps: ${recorder.steps.length}. Click Save to persist.`);\n  }\n\n  function saveRecording() {\n    const plan = {\n      task: 'Recorded Task',\n      steps: recorder.steps.slice()\n    };\n    localStorage.setItem('pact.recorder.plan', JSON.stringify(plan));\n    appendLog('Recorder', 'Saved to localStorage under key: pact.recorder.plan');\n  }\n\n  function toTarget(el) {\n    return {\n      selector: cssPath(el),\n      role: el.getAttribute('role') || undefined,\n      name: el.getAttribute('aria-label') || undefined,\n      text: (el.innerText || '').trim().slice(0, 60) || undefined,\n      placeholder: (el.placeholder || undefined)\n    };\n  }\n\n  function highlight(el) {\n    el.classList.add('pact-recorder-highlight');\n    setTimeout(() => el.classList.remove('pact-recorder-highlight'), 300);\n  }\n\n  function cssPath(el) {\n    if (!el || el.nodeType !== 1) return null;\n    if (el.id) return `#${el.id}`;\n    if (el.getAttribute('data-testid')) return `[data-testid=\"${el.getAttribute('data-testid')}\"]`;\n    const parts = [];\n    while (el && el.nodeType === 1 && parts.length < 4 && !el.id && !el.getAttribute('data-testid')) {\n      let selector = el.nodeName.toLowerCase();\n      if (el.className) {\n        const cls = String(el.className).trim().split(/\\s+/).slice(0,2).join('.');\n        if (cls) selector += `.${cls}`;\n      }\n      const parent = el.parentNode;\n      if (!parent) break;\n      const siblings = Array.from(parent.children).filter(c => c.nodeName === el.nodeName);\n      if (siblings.length > 1) selector += `:nth-of-type(${1 + siblings.indexOf(el)})`;\n      parts.unshift(selector);\n      el = parent;\n      if (el.id) parts.unshift(`#${el.id}`);\n    }\n    return parts.join(' > ');\n  }\n\n  function appendLog(source, message) {\n    const item = document.createElement('div');\n    item.className = 'pact-log-item';\n    item.textContent = `[${source}] ${message}`;\n    log.appendChild(item);\n    log.scrollTop = log.scrollHeight;\n  }\n\n  async function confirm({ message }) {\n    return await new Promise((resolve) => {\n      const wrap = document.createElement('div');\n      wrap.className = 'pact-confirm';\n      wrap.innerHTML = `\n        <div class=\"pact-confirm-box\" role=\"dialog\" aria-modal=\"true\">\n          <div class=\"pact-confirm-msg\"></div>\n          <div class=\"pact-confirm-actions\">\n            <button class=\"pact-btn-yes\" type=\"button\">Confirm</button>\n            <button class=\"pact-btn-no\" type=\"button\">Cancel</button>\n          </div>\n        </div>\n      `;\n      wrap.querySelector('.pact-confirm-msg').textContent = message;\n      const yes = wrap.querySelector('.pact-btn-yes');\n      const no = wrap.querySelector('.pact-btn-no');\n      yes.addEventListener('click', () => { cleanup(); resolve(true); });\n      no.addEventListener('click', () => { cleanup(); resolve(false); });\n      document.body.appendChild(wrap);\n      function cleanup() { wrap.remove(); }\n    });\n  }\n\n  async function runTask(plan) {\n    if (state.running) return;\n    state.running = true;\n    runBtn.disabled = true;\n    stopBtn.disabled = false;\n\n    state.controller = new AbortController();\n    const startedAt = Date.now();\n\n    appendLog('Agent', `Starting task: ${plan.task}`);\n\n    try {\n      await runPlan(plan, {\n        allowlist,\n        confirm,\n        signal: state.controller.signal,\n        onEvent: (e) => {\n          if (e.type === 'step:start') appendLog('Step', `#${e.i + 1} ${e.step.action}`);\n          if (e.type === 'step:success') appendLog('Step', `#${e.i + 1} \u2713`);\n          if (e.type === 'step:fail') appendLog('Error', `#${e.i + 1} ${e.error}`);\n          if (e.type === 'plan:success') appendLog('Agent', `Done in ${Math.round((Date.now() - startedAt)/1000)}s`);\n        }\n      });\n    } catch (err) {\n      if (String(err) === 'Error: aborted' || String(err) === 'aborted') {\n        appendLog('Agent', 'Stopped by user');\n      } else {\n        appendLog('Agent', `Failed: ${String(err)}`);\n      }\n    } finally {\n      state.running = false;\n      runBtn.disabled = false;\n      stopBtn.disabled = true;\n      state.controller = null;\n    }\n  }\n\n  // Auto-open in demo environments\n  setTimeout(() => { /* open(); */ }, 0);\n\n  return { open, close, toggle, runTask, appendLog };\n}\n\n"],
  "mappings": "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",
  "names": ["src_exports", "__export", "boot", "plans", "version", "findTarget", "target", "timeoutMs", "deadline", "lastError", "scope", "el", "resolveOnce", "e", "sleep", "t", "candidates", "cssEscape", "byAria", "byText", "pickBest", "role", "name", "els", "needle", "norm", "accessibleName", "text", "clickables", "scored", "score", "a", "b", "s", "isVisible", "inViewport", "style", "r", "ms", "isAllowedUrl", "url", "allowlist", "full", "rx", "requiresConfirmation", "el", "tag", "txt", "riskyWords", "w", "runPlan", "plan", "opts", "allowlist", "onEvent", "confirm", "defaultConfirm", "signal", "ctx", "abortHandler", "i", "step", "execStep", "err", "navigate", "waitFor", "click", "type", "select", "scroll", "extract", "url", "full", "isAllowedUrl", "timeout", "start", "byUrl", "byText", "bySel", "sleep", "el", "findTarget", "requiresConfirmation", "labelFor", "sel", "value", "label", "toSet", "opt", "o", "x", "tableToArray", "root", "r", "c", "message", "ms", "workdayTakeDayOffNextMonday", "nextMondayLabel", "delta", "nm", "planFromText", "text", "context", "t", "workdayTakeDayOffNextMonday", "saved", "loadRecordedPlan", "raw", "plan", "createWidget", "runPlan", "plans", "workdayTakeDayOffNextMonday", "allowlist", "state", "root", "launcher", "panel", "closeBtn", "log", "form", "input", "runBtn", "stopBtn", "recordBtn", "saveBtn", "runRecordingBtn", "clearRecordingBtn", "open", "close", "toggle", "runTask", "e", "text", "plan", "planFromText", "appendLog", "recorder", "stopRecorder", "startRecorder", "saveRecording", "loadRecordedPlan", "onClick", "el", "target", "toTarget", "highlight", "onChange", "value", "type", "fn", "cssPath", "parts", "selector", "cls", "parent", "siblings", "c", "source", "message", "item", "confirm", "resolve", "wrap", "yes", "no", "cleanup", "startedAt", "err", "getBaseUrl", "script", "s", "ensureStylesheet", "href", "ss", "link", "boot", "options", "baseUrl", "allowlist", "escapeRegExp", "plans", "workdayTakeDayOffNextMonday", "createWidget", "runPlan", "version", "str"]
}
